function addView(){history.pushState(["addView"],null,null)}function chatView(){history.pushState(["chatView"],null,null);getHeader("app-header","<a class='material-icons mdc-top-app-bar__navigation-icon mdc-theme--secondary'>arrow_back</a>","");document.getElementById("app-current-panel").innerHTML=getTemplate();var e=new mdc.list.MDCList(document.getElementById("chats"));console.log(e),e.listElements.forEach(function(e){new mdc.ripple.MDCRipple(e)})}function getTemplate(){return'\n    <div style="\n    padding: 16px 16px 0px 16px;\n">\n    <div class="mdc-text-field text-field mdc-text-field--outlined mdc-text-field--with-leading-icon" style="\n    width: 100%;\n"><i class="material-icons mdc-text-field__icon">search</i><input type="text" id="text-field-outlined-leading" class="mdc-text-field__input"><div class="mdc-notched-outline mdc-notched-outline--upgraded"><div class="mdc-notched-outline__leading"></div><div class="mdc-notched-outline__notch" style=""><label class="mdc-floating-label" for="text-field-outlined-leading" style="">Search</label></div><div class="mdc-notched-outline__trailing"></div></div></div>\n    <h1 class="mdc-typography--headline6" style="\n    margin-bottom: 0;\n">Messages</h1>\n    </div>\n    \n    <ul class="mdc-list demo-list mdc-list--two-line mdc-list--avatar-list" id="chats">\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n    <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0" id="d9f4d3b4-e0db-44ca-8f4e-245e7590d9e6" style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.7064; --mdc-ripple-fg-translate-start:36.6641px, -129.914px; --mdc-ripple-fg-translate-end:120px, -144px;"><img class="mdc-list-item__graphic material-icons" aria-hidden="true" src="./img/test.jpeg"><span class="mdc-list-item__text"><span class="mdc-list-item__primary-text">Shikhar</span><span class="mdc-list-item__secondary-text">Lorem Ipsum</span></span><span class="mdc-list-item__meta" aria-hidden="true">12:38 am</span></li>\n\n    </ul>\n    </ul>'}function getCellularInformation(){var e=void 0,t=AndroidInterface.getMobileCountryCode(),a=AndroidInterface.getMobileNetworkCode(),n=AndroidInterface.getRadioType(),i=AndroidInterface.getCarrier(),s=AndroidInterface.getWifiAccessPoints();try{e=AndroidInterface.getCellTowerInformation()}catch(e){console.log(e)}var o=[],l=[];s&&(o=parseQuery(s)),e&&(l=removeFalseCellIds(parseQuery(e)));var c={};return t&&(c.homeMobileCountryCode=Number(t)),a&&(c.homeMobileNetworkCode=Number(a)),i&&(c.carrier=i),n&&(c.radioType=n),o.length&&(c.wifiAccessPoints=o),l.length&&(c.cellTowers=l),o.length&&l.length?c.considerIp=!1:c.considerIp=!0,c}function removeFalseCellIds(e){var t=2147483647;return e.filter(function(e){return 0<e.cellId&&e.cellId<t&&0<e.locationAreaCode&&e.locationAreaCode<t})}function parseQuery(e){var a=[];return e.split(",").forEach(function(e){var t=new URLSearchParams(e);a.push(queryPatramsToObject(t))}),a}function queryPatramsToObject(e){var a={};return e.forEach(function(e,t){a[t]="macAddress"===t?e:Number(e)}),a}function createElement(e,t){var a=document.createElement(e);return t&&Object.keys(t).forEach(function(e){a[e]=t[e]}),a}function createHeader(e,t,a){var n=createElement("header",{className:"mdc-top-app-bar",id:a}),i=createElement("div",{className:"mdc-top-app-bar__row"}),s=createElement("section",{className:"mdc-top-app-bar__section mdc-top-app-bar__section--align-start"});if(e.forEach(function(e){var t=createElement("a",{className:"material-icons mdc-top-app-bar__navigation-icon",textContent:e});s.appendChild(t)}),i.appendChild(s),t.length){var o=createElement("section",{className:"mdc-top-app-bar__section mdc-top-app-bar__section--align-end"});o.setAttribute("role","toolbar"),t.forEach(function(e){var t=createElement("a",{className:"material-icons mdc-top-app-bar__action-item",textContent:e});o.appendChild(t)}),i.appendChild(o)}return n.appendChild(i),new mdc.topAppBar.MDCTopAppBar(n)}function Dialog(e,t){this.title=e,this.content=t}function Button(e){this.name=e;var t=createElement("button",{className:"mdc-button"});t.appendChild(createElement("span",{className:"mdc-button__label",textContent:this.name})),this.base=t}function iconButton(e){return this.base=createElement("button",{className:"mdc-icon-button "+e.className,id:e.id}),this.base.setAttribute("aria-label",e.label),this.base.setAttribute("aria-hidden","true"),this.base.setAttribute("aria-pressed","false"),this.base.appendChild(createElement("i",{className:"material-icons mdc-icon-button__icon mdc-icon-button__icon--on",textContent:e.initialState})),this.base.appendChild(createElement("i",{className:"material-icons mdc-icon-button__icon",textContent:e.finalState})),new mdc.iconButton.MDCIconButtonToggle(this.base)}function Fab(e){this.fabName=e;var t=createElement("button",{className:"mdc-fab"});this.span=createElement("span",{className:"mdc-fab__icon material-icons",textContent:this.fabName}),t.appendChild(this.span),this.base=t}function getHeader(e,t,a){var n=document.getElementById(e);return n.querySelector("#section-start").innerHTML=t,n.querySelector("#section-end").innerHTML=a,topAppBar=new mdc.topAppBar.MDCTopAppBar(n),topAppBar.foundation_.adapter_.deregisterNavigationIconInteractionHandler("MDCTopAppBar:nav",handleNav),topAppBar}function AppKeys(){this.mode="dev"}Dialog.prototype.create=function(e){var t=createElement("div",{className:"mdc-dialog",role:"alertDialog"});t.setAttribute("aria-modal","true"),t.setAttribute("aria-labelledby","Title"),t.setAttribute("aria-describedby","content");var a=createElement("div",{className:"mdc-dialog__container"}),n=createElement("div",{className:"mdc-dialog__surface"}),i=createElement("h2",{className:"mdc-typography--headline4 mdc-dialog__title "+(this.title?"":"hidden"),textContent:this.title}),s=createElement("div",{className:"mdc-dialog__content"});if(this.content instanceof HTMLElement?s.appendChild(this.content):s.innerHTML=this.content,n.appendChild(i),n.appendChild(s),"simple"!==e){var o=createElement("footer",{className:"mdc-dialog__actions"}),l=createElement("button",{className:"mdc-button mdc-dialog__button",type:"button",textContent:"cancel"});l.setAttribute("data-mdc-dialog-action","close");var c=createElement("button",{className:"mdc-button mdc-dialog__button",type:"button",textContent:"Create"});c.setAttribute("data-mdc-dialog-action","accept"),o.appendChild(l),o.appendChild(c),n.appendChild(o)}a.appendChild(n),t.appendChild(a),t.appendChild(createElement("div",{className:"mdc-dialog__scrim"}));var r=document.getElementById("dialog-container");return r.innerHTML="",r.appendChild(t),new mdc.dialog.MDCDialog(t)},Button.prototype.getButton=function(){return new mdc.ripple.MDCRipple(this.base)},Button.prototype.disabled=function(e){this.base.disabled=e},Button.prototype.raised=function(){this.base.classList.add("mdc-button--raised")},Button.prototype.shaped=function(){this.base.classList.add("shaped")},Button.prototype.selectorButton=function(){this.base.classList.add("selector-send","selector-submit--button")},Fab.prototype=Object.create(new Button),Fab.prototype.extended=function(e){this.base.classList.add("mdc-fab--extended");var t=createElement("label",{className:"mdc-fab__label",textContent:e});return this.base.appendChild(t),this.getButton()},AppKeys.prototype.getMode=function(){return this.mode},AppKeys.prototype.getMapKey=function(){return"production"===this.mode?"AIzaSyA4s7gp7SFid_by1vLVZDmcKbkEcsStBAo":"AIzaSyCadBqkHUJwdcgKT11rp_XWkbQLFAy80JQ"},AppKeys.prototype.getKeys=function(){return"production"===this.mode?{apiKey:this.getMapKey(),authDomain:"growthfile-207204.firebaseapp.com",databaseURL:"https://growthfile-207204.firebaseio.com",projectId:"growthfile-207204",storageBucket:"growthfile-207204.appspot.com",messagingSenderId:"701025551237"}:{apiKey:this.getMapKey(),authDomain:"growthfilev2-0.firebaseapp.com",projectId:"growthfilev2-0",messagingSenderId:"1011478688238"}},AppKeys.prototype.getBaseUrl=function(){return"production"===this.mode?"https://api2.growthfile.com/api/":"https://us-central1-growthfilev2-0.cloudfunctions.net/api/"};var map,globMark,appKey=new AppKeys,progressBar=void 0,snackBar=void 0,ui=void 0,send=void 0,change=void 0,next=void 0,emailInit=void 0,db=void 0,isCheckInCreated=void 0,gray=[{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#D6E2E6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#CFD4D5"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#7492A8"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#DDE2E3"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#CFD4D5"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#dde2e3"}]},{featureType:"landscape.natural",elementType:"labels.text.fill",stylers:[{color:"#7492A8"}]},{featureType:"landscape.natural.terrain",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#DDE2E3"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{saturation:-100}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#588CA4"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#B9F6CA"}]},{featureType:"poi.park",elementType:"geometry.stroke",stylers:[{color:"#BAE6A1"}]},{featureType:"poi.sports_complex",elementType:"geometry.fill",stylers:[{color:"#C6E8B3"}]},{featureType:"poi.sports_complex",elementType:"geometry.stroke",stylers:[{color:"#BAE6A1"}]},{featureType:"road",elementType:"labels.icon",stylers:[{saturation:-45},{lightness:10},{visibility:"on"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#41626B"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#FFFFFF"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#C1D1D6"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#A6B5BB"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"on"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.fill",stylers:[{color:"#9FB6BD"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#FFFFFF"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{saturation:-70}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#CFD4D5"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#CFD4D5"}]},{featureType:"transit.station",elementType:"labels.text.fill",stylers:[{color:"#90CAF9"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{saturation:-100},{lightness:-5}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#A6CBE3"}]}],native={setFCMToken:function(e){localStorage.setItem("token",e)},getFCMToken:function(){return localStorage.getItem("token")},setName:function(e){localStorage.setItem("deviceType",e)},getName:function(){return localStorage.getItem("deviceType")},setIosInfo:function(e){var t=new URLSearchParams(e),a={};t.forEach(function(e,t){a[t]="appVersion"===t?Number(e):e}),localStorage.setItem("deviceInfo",JSON.stringify(a))},getIosInfo:function(){return localStorage.getItem("deviceInfo")},getInfo:function(){if(!this.getName())return!1;if("Android"!==this.getName())return this.getIosInfo();var t=void 0;try{t=getDeviceInfomation(),localStorage.setItem("deviceInfo",t)}catch(e){sendExceptionObject(e,"Catch Type 3: AndroidInterface.getDeviceId in native.getInfo()",[]),t=JSON.stringify({baseOs:this.getName(),deviceBrand:"",deviceModel:"",appVersion:10,osVersion:"",id:""}),localStorage.setItem("deviceInfo",t)}return t}};function isNewDay(e){var t=localStorage.getItem("today");return t?!moment(moment().format("YYYY-MM-DD")).isSame(moment(t))&&(e&&localStorage.setItem("today",moment().format("YYYY-MM-DD")),!0):(e&&localStorage.setItem("today",moment().format("YYYY-MM-DD")),!0)}function getDeviceInfomation(){return JSON.stringify({id:AndroidInterface.getId(),deviceBrand:AndroidInterface.getDeviceBrand(),deviceModel:AndroidInterface.getDeviceModel(),osVersion:AndroidInterface.getOsVersion(),baseOs:AndroidInterface.getBaseOs(),radioVersion:AndroidInterface.getRadioVersion(),appVersion:Number(AndroidInterface.getAppVersion())})}function firebaseUiConfig(t,a){return{callbacks:{signInSuccessWithAuthResult:function(e){return document.getElementById("dialog-container").innerHTML="",a?(emailFlow(firebase.auth().currentUser,t).then(function(){snacks("Verification Link has Been Send To you Email Address"),emailInit.foundation_.setDisabled(!0),change.root_.classList.remove("hidden"),next.root_.classList.remove("hidden"),new mdc.linearProgress.MDCLinearProgress(document.getElementById("card-progress")).close()}).catch(function(e){if(new mdc.linearProgress.MDCLinearProgress(document.getElementById("card-progress")).close(),"auth/too-many-requests"===e.code)return mapView(),void snacks("You Can Also Update Your Email Address From Your Profile");send.root_.classList.remove("hidden"),snacks(e.message)}),!1):t?(updateEmail(e.user,t),!1):void 0},signInFailure:function(e){return handleUIError(e)},uiShown:function(){}},signInFlow:"popup",signInOptions:[{provider:firebase.auth.PhoneAuthProvider.PROVIDER_ID,recaptchaParameters:{type:"image",size:"normal",badge:"bottomleft"},defaultCountry:"IN",defaultNationalNumber:t?firebase.auth().currentUser.phoneNumber:""}]}}function userSignedOut(){ui||(ui=new firebaseui.auth.AuthUI(firebase.auth())),ui.start(document.getElementById("login-container"),firebaseUiConfig())}function startApp(e){firebase.auth().onAuthStateChanged(function(l){if(!l)return document.getElementById("main-layout-app").style.display="none",void userSignedOut();if("production"!==appKey.getMode()||native.getInfo()){if(localStorage.getItem("error")&&!isNewDay()||localStorage.setItem("error",JSON.stringify({})),e){var c=window.indexedDB.open(l.uid,9);c.onupgradeneeded=function(e){if((db=c.result).onerror=function(){handleError({message:db.error.message+" from startApp on upgradeneeded"})},e.oldVersion){if(e.oldVersion<4)c.transaction.objectStore("subscriptions").createIndex("status","status");if(e.oldVersion<5)(i=c.transaction).objectStore("map").createIndex("bounds",["latitude","longitude"]);if(e.oldVersion<6){var t=(i=c.transaction).objectStore("children");t.createIndex("officeTemplate",["office","template"]),t.createIndex("employees","employee"),t.createIndex("employeeOffice",["employee","office"]),t.createIndex("team","team"),t.createIndex("teamOffice",["team","office"]);var a=firebase.auth().currentUser.phoneNumber;t.index("template").openCursor("employee").onsuccess=function(e){var t=e.target.result;t?(t.value.employee=t.value.attachment["Employee Contact"].value,t.value.attachment["First Supervisor"].value!==a&&t.value.attachment["Second Supervisor"].value!==a||(t.value.team=1),t.update(t.value),t.continue()):console.log("finished modiying children")},i.oncomplete=function(){console.log("finsihed backlog")}}if(e.oldVersion<7){var n=(i=c.transaction).objectStore("map");n.createIndex("office","office"),n.createIndex("status","status"),n.createIndex("selection",["office","status","location"])}if(e.oldVersion<8){var i,s=(i=c.transaction).objectStore("list"),o=i.objectStore("calendar");s.createIndex("office","office"),o.createIndex("office","office")}}else createObjectStores(db,l.uid)},c.onsuccess=function(){if(!areObjectStoreValid((db=c.result).objectStoreNames)){db.close(),console.log(l);var e=indexedDB.deleteDatabase(l.uid);return e.onsuccess=function(){window.location.reload()},e.onblocked=function(){snacks("Please Re-Install The App")},void(e.onerror=function(){snacks("Please Re-Install The App")})}var t=document.querySelector("#start-load");t.classList.remove("hidden"),console.log("run app"),document.getElementById("main-layout-app").style.display="block",ga("set","userId",JSON.parse(native.getInfo()).id);var a=["Loading Growthfile","Getting Your Data","Creating Profile","Please Wait"],n=0,i=setInterval(function(){n==a.length-1&&clearInterval(i),t.querySelector("p").textContent=a[n],n++},n+1e3);requestCreator("now",{device:native.getInfo(),from:"",registerToken:native.getFCMToken()}).then(function(e){e.updateClient?updateApp():e.revokeSession?revokeSession():e.hasOwnProperty("removeFromOffice")?Array.isArray(e.removeFromOffice)&&e.removeFromOffice.length&&requestCreator("removeFromOffice",e.removeFromOffice).then(function(){}):getRootRecord().then(function(a){requestCreator("Null").then(function(e){if(a.fromTime)return mapView();var t=firebase.auth().currentUser;getEmployeeDetails(IDBKeyRange.bound(["recipient","CONFIRMED"],["recipient","PENDING"]),"templateStatus").then(function(e){return e.length?t.email&&t.emailVerified?mapView():userDetails(e,t):mapView()})}).catch(console.log)})}).catch(console.log)},c.onerror=function(){handleError({message:c.error.message+" from startApp"})}}}else redirect()})}function areObjectStoreValid(e){for(var t=["map","children","calendar","root","subscriptions","list","users","activity","addendum"],a=0;a<t.length;a++){var n=t[a];if(!e.contains(n))return!1}return!0}function getEmployeeDetails(n,i){return new Promise(function(a,e){var t=db.transaction(["children"]).objectStore("children").index(i).getAll(n);t.onsuccess=function(e){var t=e.target.result;return console.log(t),a(t)},t.onerror=function(){return e({message:t.error})}})}function createObjectStores(e,t){var a=e.createObjectStore("activity",{keyPath:"activityId"});a.createIndex("timestamp","timestamp"),a.createIndex("office","office"),a.createIndex("hidden","hidden"),a.createIndex("template","template");var n=e.createObjectStore("list",{keyPath:"activityId"});n.createIndex("timestamp","timestamp"),n.createIndex("status","status"),n.createIndex("office","office");var i=e.createObjectStore("users",{keyPath:"mobile"});i.createIndex("displayName","displayName"),i.createIndex("isUpdated","isUpdated"),i.createIndex("count","count"),e.createObjectStore("addendum",{autoIncrement:!0}).createIndex("activityId","activityId");var s=e.createObjectStore("subscriptions",{autoIncrement:!0});s.createIndex("office","office"),s.createIndex("template","template"),s.createIndex("officeTemplate",["office","template"]),s.createIndex("status","status");var o=e.createObjectStore("calendar",{autoIncrement:!0});o.createIndex("activityId","activityId"),o.createIndex("timestamp","timestamp"),o.createIndex("start","start"),o.createIndex("end","end"),o.createIndex("office","office"),o.createIndex("urgent",["status","hidden"]),o.createIndex("onLeave",["template","status","office"]);var l=e.createObjectStore("map",{autoIncrement:!0});l.createIndex("activityId","activityId"),l.createIndex("location","location"),l.createIndex("latitude","latitude"),l.createIndex("longitude","longitude"),l.createIndex("nearby",["status","hidden"]),l.createIndex("byOffice",["office","location"]),l.createIndex("bounds",["latitude","longitude"]),l.createIndex("office","office"),l.createIndex("status","status"),l.createIndex("selection",["office","status","location"]);var c=e.createObjectStore("children",{keyPath:"activityId"});c.createIndex("template","template"),c.createIndex("office","office"),c.createIndex("templateStatus",["template","status"]),c.createIndex("officeTemplate",["office","template"]),c.createIndex("employees","employee"),c.createIndex("employeeOffice",["employee","office"]),c.createIndex("team","team"),c.createIndex("teamOffice",["team","office"]),e.createObjectStore("root",{keyPath:"uid"}).put({uid:t,fromTime:0,location:""})}function redirect(){firebase.auth().signOut().then(function(){window.location="https://www.growthfile.com"}).catch(function(e){console.log(e),window.location="https://www.growthfile.com",handleError({message:e+" from redirect"})})}function setVenueForCheckIn(e,t){var a={geopoint:{latitude:"",longitude:""},address:"",location:"",venueDescriptor:t.venue[0]};return e?(a.location=e.location,a.address=e.address,a.geopoint.latitude=e.latitude,a.geopoint.longitude=e.longitude,t.venue=[a],t.share=[],console.log(t)):(t.venue=[a],t.share=[]),t}function getUniqueOfficeCount(){return new Promise(function(e,t){var a=[],n=db.transaction(["children"]);n.objectStore("children").index("employees").openCursor(firebase.auth().currentUser.phoneNumber).onsuccess=function(e){var t=e.target.result;t&&(a.push(t.value.office),t.continue())},n.oncomplete=function(){return e(a)},n.onerror=function(){return t({message:n.error.message,body:JSON.stringify(n.error)})}})}function checkMapStoreForNearByLocation(o,l){return new Promise(function(n,e){var i=[],t=db.transaction(["map"]),a=t.objectStore("map").index("byOffice"),s=IDBKeyRange.bound([o,""],[o,"ï¿¿"]);a.openCursor(s).onsuccess=function(e){var t=e.target.result;if(t)if(t.value.location)if(t.value.latitude&&t.value.longitude){var a=calculateDistanceBetweenTwoPoints(t.value,l);isLocationLessThanThreshold(a)&&i.push(t.value),t.continue()}else t.continue();else t.continue()},t.oncomplete=function(){var t={};i.forEach(function(e){t[e.location]=e});var a=[];Object.keys(t).forEach(function(e){a.push(t[e])});var e=a.sort(function(e,t){return e.accuracy-t.accuracy});n(e)},t.onerror=function(){e(t.error)}})}window.onpopstate=function(e){e.state&&window[e.state[0]]()},window.addEventListener("load",function(){firebase.initializeApp(appKey.getKeys()),progressBar=new mdc.linearProgress.MDCLinearProgress(document.querySelector(".mdc-linear-progress")),snackBar=new mdc.snackbar.MDCSnackbar(document.querySelector(".mdc-snackbar"));for(var e,t=document.querySelectorAll(".mdc-bottom-navigation__list"),n="mdc-bottom-navigation__list-item--activated",a=0;e=t[a];a++)e.addEventListener("click",function(e){var t=e.target;if(t.dataset.state!==history.state[0]){for(;!t.classList.contains("mdc-bottom-navigation__list-item")&&t;)t=t.parentNode;if(t){var a=document.querySelector("."+e.target.parentElement.parentElement.parentElement.className.replace(/.*(demo-card-\d).*/,"$1")+" ."+n);a&&a.classList.remove(n),e.target.classList.add(n),console.log(t),window[t.dataset.state]()}}});(navigator,moment.updateLocale("en",{calendar:{lastDay:"[yesterday]",sameDay:"hh:mm",nextDay:"[Tomorrow at] LT",lastWeek:"dddd",nextWeek:"dddd [at] LT",sameElse:"L"},longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YY"},months:["January","February","March","April","May","June","July","August","September","October","November","December"]}),window.Worker||window.indexedDB)?startApp(!0):new Dialog("App Incompatiblity","Growthfile is incompatible with this device").create().open()});var o=void 0;function handleNav(e){var t=history.state[0];return"profileView"===t||"snapView"===t||"chatView"===t?history.back():"cardView"===t?(history.pushState(["mapView"],null,null),toggleCardHeight(!1,"card-form")):profileView()}function mapView(){history.pushState(["mapView"],null,null),document.getElementById("start-load").classList.add("hidden"),isCheckInCreated&&showBottomNav(),progressBar.close();var e=getHeader("app-header","<img  class=\"material-icons mdc-top-app-bar__navigation-icon mdc-theme--secondary header-photo\" src='./img/empty-user.jpg'>",'<span class="material-icons mdc-top-app-bar__action-item mdc-theme--secondary mdc-theme--text-primary-on-light" aria-label="chat" onclick="takeSnap()">photo_camera</a>');e.root_.classList.remove("hidden"),e.setScrollTarget(document.getElementById("main-content")),e.navIcon_.src=firebase.auth().currentUser.photoURL,e.listen("MDCTopAppBar:nav",handleNav),document.getElementById("app-current-panel").innerHTML=mapDom(),document.getElementById("app-current-panel").classList.remove("user-detail-bckg"),document.getElementById("app-current-panel").classList.remove("mdc-top-app-bar--dense-fixed-adjust"),document.getElementById("map-view").style.height="100%",manageLocation().then(function(e){document.getElementById("start-load").classList.add("hidden");var t={lat:e.latitude,lng:e.longitude};console.log(t);var a=new GetOffsetBounds(e,.5);if(o={north:a.north(),south:a.south(),east:a.east(),west:a.west()},document.getElementById("map")){map=new google.maps.Map(document.getElementById("map"),{center:t,zoom:18,disableDefaultUI:!0,styles:gray,restriction:{latLngBounds:{north:a.north(),south:a.south(),east:a.east(),west:a.west()},strictBounds:!0}}),new google.maps.Marker({position:t,icon:"https://www.robotwoods.com/dev/misc/bluecircle.png"}).setMap(map);new google.maps.Circle({strokeColor:"#89273E",strokeOpacity:.8,strokeWeight:2,fillColor:"#89273E",fillOpacity:.35,map:map,center:t,radius:e.accuracy});google.maps.event.addListenerOnce(map,"idle",function(){console.log("idle_once"),loadCardData(o,map,e)})}}).catch(function(e){console.log(e),document.getElementById("start-load").classList.add("hidden"),document.getElementById("map").innerHTML='<div class="center-abs"><p>Failed To Detect You Location</p><button class="mdc-button" id="try-again">Try Again</button></div>',new mdc.ripple.MDCRipple(document.getElementById("try-again")).root_.onclick=function(){document.getElementById("start-load").classList.remove("hidden"),mapView()}})}function createForm(e,s,t,l){document.getElementById("submit-cont").innerHTML="<button class='mdc-button' id='create-form'>Create "+s+"</button>",new mdc.ripple.MDCRipple(document.getElementById("create-form")).root_.addEventListener("click",function(){history.pushState(["cardView"],null,null),getSubscription(e,s).then(function(e){var a=JSON.parse(JSON.stringify(e)),n=Math.floor(Math.random()*Math.floor(1e5));if("customer"===s){var t=new Dialog("Customer",customer(e,n)).create();t.open(),t.listen("MDCDialog:closed",function(e){"accept"===e.detail.action&&(a.venue=[{geopoint:{latitude:l.latitude,longitude:l.longitude},location:"Dummy Location "+n,address:"Dummy Location "+n,venueDescriptor:"Customer Office"}],a.attachment.Name.value="Dummy Name "+n,a.share=[],console.log(a),requestCreator("create",a).then(function(){successDialog(),document.getElementById("selection-box").querySelector("aside").classList.add("large"),history.pushState(["mapView"],null,null),loadCardData(o,map,l,{latitude:l.latitude,longitude:l.longitude,location:"Dummy Location "+n,address:"Dummy Location "+n,venueDescriptor:"Customer Office",office:a.office,template:a.template})}).catch(function(e){snacks(e.message)}))})}if("dsr"===s||"tour plan"===s||"duty roster"===s){var i=new Dialog(s,common(e)).create();i.open(),i.listen("MDCDialog:closed",function(e){if("accept"===e.detail.action){a.attachment.Name&&(a.attachment.Name.value="sample name"+n);var t=[];a.schedule.forEach(function(e){t.push({name:e,startTime:Date.now(),endTime:Date.now()})}),a.schedule=t,a.share=[],console.log(a),requestCreator("create",a).then(function(){successDialog(),history.pushState(["mapView"],null,null)})}})}[].map.call(document.querySelectorAll(".mdc-text-field"),function(e){new mdc.textField.MDCTextField(e)})})})}function loadCardData(e,o,l,c){loadNearByLocations(e,o,l).then(function(e){var t=document.getElementById("selection-box"),n=t.querySelector("aside"),a=t.querySelector(".content-body");a.innerHTML="";var i=document.getElementById("card-primary"),s=new mdc.linearProgress.MDCLinearProgress(document.getElementById("check-in-prog"));i.textContent="Hello, "+(firebase.auth().currentUser.displayName||firebase.auth().currentUser.phoneNumber),t.classList.remove("hidden"),a.innerHTML="<div>\n    "+mdcSelectVenue(e,"Where Are You ?","select-venue",c)+"\n    <div id='office-cont' class='pt-10'></div>\n    <div id='subs-cont' class='pt-10'></div>\n    <div id='submit-cont' class='pt-10'></div>\n    </div>",selectVenue=new mdc.select.MDCSelect(document.getElementById("select-venue")),selectVenue.listen("MDCSelect:change",function(e){if(console.log(e.detail.value),n.classList.add("open"),e.detail.value){var a=JSON.parse(e.detail.value);if(1===a)return document.getElementById("office-cont").innerHTML="",document.getElementById("subs-cont").innerHTML="",document.getElementById("submit-cont").innerHTML="",void getUniqueOfficeCount().then(function(e){if(e.length){document.getElementById("office-cont").innerHTML=""+mdcDefaultSelect(e,"Choose Office","choose-office");var t=new mdc.select.MDCSelect(document.getElementById("choose-office"));t.listen("MDCSelect:change",function(a){getSubscription(a.detail.value,"check-in").then(function(e){e&&(s.open(),requestCreator("create",setVenueForCheckIn("",e)).then(function(){snacks("Check-in created"),isCheckInCreated=!0,n.classList.add("large"),showBottomNav(),s.close(),addSnapControl(o,a.detail.value),checkForVenueSubs(a.detail.value).then(function(e){if(e.length){i.textContent="What Do You Want to do ?",document.getElementById("subs-cont").innerHTML=""+mdcDefaultSelect(e,"Choose","select-subs","<option value='NONE'>\n                  None\n                  </option>");var t=new mdc.select.MDCSelect(document.getElementById("select-subs"));t.listen("MDCSelect:change",function(e){console.log(e),"NONE"!==e.detail.value&&-1!=e.detail.index?createForm(a.detail.value,e.detail.value,"",l):document.getElementById("submit-cont").innerHTML=""}),t.selectedIndex=-1}})}).catch(function(e){snacks("Please Try again later"),s.close()}))})}),1==e.length&&(t.selectedIndex=0),1<e.length&&(t.selectedIndex=-1,i.textContent="Choose Office")}});document.getElementById("office-cont").innerHTML="",document.getElementById("subs-cont").innerHTML="",document.getElementById("submit-cont").innerHTML="",getSubscription(a.office,"check-in").then(function(e){if(c&&c.location===a.location)known(a,i,l);else{document.getElementById("submit-cont").innerHTML="<button id='confirm' class='mdc-button mdc-theme--primary-bg mdc-theme--text-primary-on-light'>\n        <span class='mdc-button__label'>Confirm</span>\n        </button>";var t=new mdc.ripple.MDCRipple(document.getElementById("confirm"));t.root_.onclick=function(){t.root_.classList.add("hidden"),s.open(),requestCreator("create",setVenueForCheckIn(a,e)).then(function(){snacks("Check-in created"),isCheckInCreated=!0,n.classList.add("large"),showBottomNav(),s.close(),known(a,i,l)}).catch(function(e){console.log(e),t.root_.classList.remove("hidden"),snacks("Please Try Again"),s.close()})}}})}}),c?selectVenue.selectedIndex=1:(e.length||(selectVenue.selectedIndex=0),1==e.length&&(selectVenue.selectedIndex=1),1<e.length&&(selectVenue.selectedIndex=-1,i.textContent="Where Are You ?"))})}function showBottomNav(){document.querySelector(".mdc-bottom-navigation").classList.remove("hidden")}function known(a,n,i){getAvailbleSubs(a).then(function(e){if(e.length){n.textContent="What Do You Want to do ?",document.getElementById("subs-cont").innerHTML=""+mdcDefaultSelect(e,"Choose","select-subs","<option value='NONE'>\n    None\n    </option>");var t=new mdc.select.MDCSelect(document.getElementById("select-subs"));t.listen("MDCSelect:change",function(e){"NONE"!==e.detail.value&&-1!=e.detail.index?createForm(a.office,e.detail.value,a,i):document.getElementById("submit-cont").innerHTML=""}),1<e.length&&(t.selectedIndex=-1),1==e.length&&(t.selectedIndex=0)}})}function common(e){return"<div class='form-container'>\n  <div class=\"mdc-text-field mdc-text-field--with-leading-icon\" data-type='schedule' data-value='"+e.schedule[0]+'\'>\n  <i class="material-icons mdc-text-field__icon">location_on</i>\n  <input class="mdc-text-field__input">\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Follow Up Date</label>\n</div>\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-type=\'schedule\' data-value=\''+e.schedule[0]+'\'>\n<i class="material-icons mdc-text-field__icon">location_on</i>\n<input class="mdc-text-field__input">\n<div class="mdc-line-ripple"></div>\n<label class="mdc-floating-label">Closure Date</label>\n</div>\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-type=\'schedule\' data-value=\''+e.schedule[0]+'\'>\n<i class="material-icons mdc-text-field__icon">location_on</i>\n<input class="mdc-text-field__input">\n<div class="mdc-line-ripple"></div>\n<label class="mdc-floating-label">Visit Date</label>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=Name data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">account_circle</i>\n  <input class="mdc-text-field__input"  autofocus=\'true\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Name</label>\n</div>\n<div class="mdc-text-field-helper-line">\n<div class="mdc-text-field-helper-text"aria-hidden="true">Name Of The Customer</div>\n</div>\n\n<div class="mdc-text-field" style=\'width:46%;float: left;\' data-value=\'Daily Start Time\' data-type=\'attachment\'>\n  <input class="mdc-text-field__input" type=\'time\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Daily End Time</label>\n</div>\n\n<div class="mdc-text-field " style=\'width:46%;float: right;\' data-value=\'Daily End Time\' data-type=\'attachment\'>\n  <input class="mdc-text-field__input" type=\'time\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Daily Start Time</label>\n</div>\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=\'Second Contact\' data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">phone</i>\n  <input class="mdc-text-field__input" type=\'tel\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Second Contact</label>\n</div>\n<div class="mdc-text-field mdc-text-field--with-leading-icon " data-value=\'First Contact\' data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">phone</i>\n  <input class="mdc-text-field__input" type=\'tel\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">First Contact</label>\n</div>\n\n\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon " data-value=\'Customer Code\' data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">code</i>\n  <input class="mdc-text-field__input">\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Comment</label>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=\'Customer E-mail Id\'  data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">email</i>\n  <input class="mdc-text-field__input" type=\'email\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Product 1</label>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=\'Customer E-mail Id\'  data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">email</i>\n  <input class="mdc-text-field__input" type=\'email\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Product 2</label>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=\'Customer E-mail Id\'  data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">email</i>\n  <input class="mdc-text-field__input" type=\'email\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Product 3</label>\n</div>\n\n<ul class="mdc-list demo-list" id=\'template-type\'>\n  <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0"\n      style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.69977; --mdc-ripple-fg-translate-start:276.613px, -164.313px; --mdc-ripple-fg-translate-end:120px, -156px;">\n      Customer<span class="mdc-list-item__meta material-icons" aria-hidden="true">add_circle</span>\n  </li>\n\n</ul>\n</div>\n  '}function customer(e,t){return"\n  <div class='form-container'>\n  \n  <div class=\"mdc-text-field mdc-text-field--with-leading-icon\" data-type='venue' data-value='"+e.venue[0]+'\'>\n  <i class="material-icons mdc-text-field__icon">location_on</i>\n  <input class="mdc-text-field__input" value=\'Dummy Location '+t+'\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label mdc-floating-label--float-above">Customer Office</label>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=Name data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">account_circle</i>\n  <input class="mdc-text-field__input" required autofocus=\'true\' value=\'Dummy Name '+t+'\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label mdc-floating-label--float-above">Name</label>\n</div>\n<div class="mdc-text-field-helper-line">\n<div class="mdc-text-field-helper-text"aria-hidden="true">Name Of The Customer</div>\n</div>\n\n<div class="mdc-text-field" style=\'width:46%;float: left;\' data-value=\'Daily Start Time\' data-type=\'attachment\'>\n  <input class="mdc-text-field__input" type=\'time\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Daily End Time</label>\n</div>\n\n<div class="mdc-text-field " style=\'width:46%;float: right;\' data-value=\'Daily End Time\' data-type=\'attachment\'>\n  <input class="mdc-text-field__input" type=\'time\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Daily Start Time</label>\n</div>\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=\'Second Contact\' data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">phone</i>\n  <input class="mdc-text-field__input" type=\'tel\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Second Contact</label>\n</div>\n<div class="mdc-text-field mdc-text-field--with-leading-icon " data-value=\'First Contact\' data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">phone</i>\n  <input class="mdc-text-field__input" type=\'tel\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">First Contact</label>\n</div>\n\n<div class="mdc-select" data-value=\'Weekly Off\' style=\'width:100%\' data-type=\'attachment\'>\n  <i class="mdc-select__dropdown-icon"></i>\n  <select class="mdc-select__native-control">\n      <option value="" disabled selected></option>\n      <option value="Sunday">\n          Sunday\n      </option>\n      <option value="monday">\n          Monday\n      </option>\n      <option value="tuesday">\n          Tuesday\n      </option>\n      <option value="wednesday">\n          Wednesday\n      </option>\n      <option value="thrusday">\n          Thrusday\n      </option>\n      <option value="friday">\n          Friday\n      </option>\n      <option value="saturday">\n          Saturday\n      </option>\n  </select>\n  <label class="mdc-floating-label">WeeKLY Off</label>\n  <div class="mdc-line-ripple"></div>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon " data-value=\'Customer Code\' data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">code</i>\n  <input class="mdc-text-field__input">\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Customer Code</label>\n</div>\n\n<div class="mdc-text-field mdc-text-field--with-leading-icon" data-value=\'Customer E-mail Id\'  data-type=\'attachment\'>\n  <i class="material-icons mdc-text-field__icon">email</i>\n  <input class="mdc-text-field__input" type=\'email\'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label">Customer Email</label>\n</div>\n<ul class="mdc-list demo-list" id=\'template-type\'>\n  <li class="mdc-list-item mdc-ripple-upgraded" tabindex="0"\n      style="--mdc-ripple-fg-size:360px; --mdc-ripple-fg-scale:1.69977; --mdc-ripple-fg-translate-start:276.613px, -164.313px; --mdc-ripple-fg-translate-end:120px, -156px;">\n      Customer Type<span class="mdc-list-item__meta material-icons" aria-hidden="true">add_circle</span>\n  </li>\n\n</ul>\n</div>'}function venueSection(e){return""+e.map(function(e){return'<div class="mdc-text-field mdc-text-field--textarea" data-venue='+e+' >\n    <textarea  class="mdc-text-field__input resize-veritcal" rows="2" cols="100"></textarea>\n    <div class="mdc-notched-outline">\n      <div class="mdc-notched-outline__leading"></div>\n      <div class="mdc-notched-outline__notch">\n        <label for="textarea" class="mdc-floating-label">'+e+'</label>\n      </div>\n      <div class="mdc-notched-outline__trailing"></div>\n    </div>\n  </div>\n  '}).join("")}function scheduleSection(e){return""+e.map(function(e){return'\n    <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-leading-icon">\n    <i class="material-icons mdc-text-field__icon">today</i>\n    <input class="mdc-text-field__input" type=\'date\'>\n    <div class="mdc-notched-outline">\n      <div class="mdc-notched-outline__leading"></div>\n      <div class="mdc-notched-outline__notch">\n        <label class="mdc-floating-label">From</label>\n      </div>\n      <div class="mdc-notched-outline__trailing"></div>\n    </div>\n  </div>\n\n  <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-leading-icon">\n  <i class="material-icons mdc-text-field__icon">calendar_today</i>\n  <input class="mdc-text-field__input" type=\'date\'>\n  <div class="mdc-notched-outline">\n    <div class="mdc-notched-outline__leading"></div>\n    <div class="mdc-notched-outline__notch">\n      <label class="mdc-floating-label">To</label>\n    </div>\n    <div class="mdc-notched-outline__trailing"></div>\n  </div>\n\n</div>\n\n  '}).join("")}function simpleInput(e,t,a){return'<div class="mdc-text-field '+(a.isFullWidth?"mdc-text-field--fullwidth":"")+" "+(a.leadingIcon?"mdc-text-field--with-leading-icon":"")+" "+(a.isOutline?"mdc-text-field--outlined":"")+'" '+a.dataset+">\n  "+(a.leadingIcon?'<i class="material-icons mdc-text-field__icon">favorite</i>':"")+'\n  <input class="mdc-text-field__input" type='+t+'>\n  <div class="mdc-notched-outline">\n    <div class="mdc-notched-outline__leading"></div>\n    <div class="mdc-notched-outline__notch">\n      <label class="mdc-floating-label">'+e+'</label>\n    </div>\n    <div class="mdc-notched-outline__trailing"></div>\n  </div>\n</div>'}function toggleCardHeight(e,t){var a=document.getElementById("map-view"),n=document.getElementById(t);e?(a.classList.add("hidden"),n.classList.remove("hidden"),n.style.height="100%",document.getElementById("app-header").classList.add("hidden")):(a.classList.remove("hidden"),document.getElementById("selection-box").classList.remove("hidden"),n.classList.add("hidden"),document.getElementById("app-header").classList.remove("hidden"))}function addSnapControl(e,t){e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].clear();var a=document.createElement("div");new TakeSnap(a,t);a.index=2,e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(a);var n=document.createElement("div");new Add(n);n.index=1,e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(n)}function Add(e){var t=new Fab("add").getButton();t.root_.id="add",t.root_.classList.add("custom-control","right","mdc-theme--primary-bg","mb-10"),e.appendChild(t.root_),t.root_.addEventListener("click",function(){console.log("clicked")})}function getAvailbleSubs(s){return new Promise(function(e,t){var a=db.transaction(["subscriptions"]),n=a.objectStore("subscriptions").index("office"),i=[];n.openCursor(s.office).onsuccess=function(e){var t=e.target.result;t&&(Object.keys(t.value.attachment).forEach(function(e){t.value.attachment[e].type===s.template&&i.push(t.value.template)}),t.continue())},a.oncomplete=function(){e(i)}})}function newLocationSelectionForm(e){return'<ul class="mdc-list" role="radiogroup" id=\'new-location-selection\'>\n  '+e.map(function(e){return'<li class="mdc-list-item" role="radio" aria-checked="false">\n    <span class="mdc-list-item__graphic">\n      <div class="mdc-radio">\n        <input class="mdc-radio__native-control"\n              type="radio"\n              id='+e.id+"\n              name="+e.name+"\n              value="+e.value+'>\n        <div class="mdc-radio__background">\n          <div class="mdc-radio__outer-circle"></div>\n          <div class="mdc-radio__inner-circle"></div>\n        </div>\n      </div>\n    </span>\n    <label class="mdc-list-item__text" for='+e.id+">"+e.label+"</label>\n  </li>"}).join("")+"\n  </ul>\n"}function mapDom(){return'\n  <div id=\'map-view\' class=\'\'>\n    <div id=\'map\'></div>\n    <div  class="overlay selection-box-auto hidden" id=\'selection-box\'>\n              <aside class="social" tabindex="-1" role="dialog" aria-labelledby="modal-label" aria-hidden="true">\n                <div class="card__primary">\n                  <h2 class="demo-card__title mdc-typography mdc-typography--headline6 margin-auto" id=\'card-primary\'>\n                  </h2>\n\n                </div>\n                <div role="progressbar"\n                  class="mdc-linear-progress mdc-linear-progress--indeterminate mdc-linear-progress--closed"\n                  id=\'check-in-prog\'>\n                  <div class="mdc-linear-progress__buffering-dots"></div>\n                  <div class="mdc-linear-progress__buffer"></div>\n                  <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">\n                    <span class="mdc-linear-progress__bar-inner"></span>\n                  </div>\n                  <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n                    <span class="mdc-linear-progress__bar-inner"></span>\n                  </div>\n                </div>\n\n                <div class="content-body">\n\n                </div>\n                <div id=\'submit-cont\'>\n                </div>\n              </aside>\n            </div>\n\n  '}function getAdddress(t){return new Promise(function(a,n){var e={lat:t.latitude,lng:t.longitude};(new google.maps.Geocoder).geocode({location:e},function(e,t){return"OK"!==t?n({message:"Geocoder failed due to: "+t}):e[0]?a(e[0].formatted_address):n({message:"No Results Found"})})})}function checkForVenueSubs(s){return new Promise(function(e,t){var a=db.transaction(["subscriptions"]),n=a.objectStore("subscriptions").index("office"),i=[];n.openCursor(s).onsuccess=function(e){var t=e.target.result;t&&("check-in"!==t.value.template&&"CANCELLED"!==t.value.status&&t.value.venue[0]&&i.push(t.value.template),t.continue())},a.oncomplete=function(){e(i)}})}function takeSnap(){AndroidInterface.startCamera()}function setFilePath(e){document.querySelector(".mdc-bottom-navigation").classList.add("hidden");getHeader("app-header","<a class='material-icons mdc-top-app-bar__navigation-icon mdc-theme--on-primary'>arrow_back</a>","");history.pushState(["snapView"],null,null);var a="data:image/jpg;base64,"+e;document.getElementById("app-current-panel").classList.add("mdc-top-app-bar--dense-fixed-adjust"),document.getElementById("app-current-panel").innerHTML='\n  \n<div id=\'snap\' class="snap-bckg" style="background-image: url('+a+'); padding: 0px; overflow: hidden; background-size: cover;">\n<div class="form-meta snap-form">\n  <div class="mdc-text-field mdc-text-field--no-label mdc-text-field--textarea" id=\'snap-textarea\'>\n      <textarea\n      class="mdc-text-field__input  snap-text mdc-theme--on-primary" rows="1" cols="100" autofocus="true"></textarea></div>\n      <button id=\'snap-submit\' class="mdc-fab app-fab--absolute mdc-theme--primary-bg  mdc-ripple-upgraded"\n    style="z-index: 9;"><i class="mdc-fab__icon material-icons">send</i>\n    </button>\n</div>\n</div>\n  ';var t=document.getElementById("snap"),n=new mdc.textField.MDCTextField(document.getElementById("snap-textarea")),i=new mdc.ripple.MDCRipple(document.getElementById("snap-submit"));n.input_.addEventListener("keyup",function(){this.style.paddingTop="25px",this.style.height="5px",this.style.height=this.scrollHeight+"px",this.scrollHeight<=300&&(i.root_.style.bottom=this.scrollHeight-20+"px")}),i.root_.addEventListener("click",function(){var t=n.value;getSubscription("Puja Capital","check-in").then(function(e){e.attachment.Photo.value=a,e.attachment.Comment.value=t,progressBar.open(),requestCreator("create",setVenueForCheckIn("",e)).then(function(){mapView()}).catch(function(){mapView()})})});var s=new Image;s.onload=function(){var e=getOrientation(s);t.style.backgroundImage="url("+a+")",t.style.padding="0px",t.style.overflow="hidden",t.classList.add("snap-bckg"),"potrait"==e&&(t.style.backgroundSize="cover"),"landscape"!=e&&"sqaure"!=e||(t.style.backgroundSize="contain")},s.src=a}function mdcDefaultSelect(e,t,a,n){return'<div class="mdc-select" id='+a+'>\n  <i class="mdc-select__dropdown-icon"></i>\n  <select class="mdc-select__native-control">\n  '+e.map(function(e){return" <option value='"+e+"'>\n    "+e+"\n    </option>"}).join("")+"\n"+n+"\n\n  </select>\n  <label class='mdc-floating-label'>"+t+'</label>\n  <div class="mdc-line-ripple"></div>\n</div>'}function mdcSelectVenue(e,t,a,n){return'<div class="mdc-select" id='+a+'>\n  <i class="mdc-select__dropdown-icon"></i>\n  <select class="mdc-select__native-control">\n\n  <option value='+JSON.stringify("1")+">New Venue</option>\n  "+(n?"<option value='"+JSON.stringify(n)+"'>"+n.location+"</option>":"")+"\n  "+e.map(function(e){return" <option value='"+JSON.stringify(e)+"'>\n    "+e.location+"\n    </option>"}).join("")+"\n  </select>\n  <label class='mdc-floating-label'>"+t+'</label>\n  <div class="mdc-line-ripple"></div>\n</div>'}function getOrientation(e){return e.width>e.height?"landscape":e.height>e.width?"potrait":e.width==e.height?"square":void 0}function focusMarker(e,t,a){e.setZoom(a),e.panTo(t)}function GetOffsetBounds(e,t){var a=180/Math.PI;this.latLng=e,this.ratio=t/6378*a,this.radioLon=this.ratio/Math.cos(this.latLng.latitude*Math.PI/180)}function getMapBounds(e){var t=e.getBounds().getNorthEast(),a=e.getBounds().getSouthWest();return{ne:[t.lat(),t.lng()],sw:[a.lat(),a.lng()]}}function loadNearByLocations(s,p,u){return new Promise(function(e,t){new google.maps.MarkerImage("./img/m.png",new google.maps.Size(30,30),null,null,new google.maps.Size(30,30));var l=new google.maps.InfoWindow,c=[],r=(indexedDB.open(firebase.auth().currentUser.uid),void 0),d=void 0,a=db.transaction(["map"]),n=a.objectStore("map").index("bounds"),i=IDBKeyRange.bound([s.south,s.west],[s.north,s.east]),m=p.getBounds();n.openCursor(i).onsuccess=function(e){var t=e.target.result;if(t)if(t.value.location&&t.value.latitude&&t.value.longitude)if(d&&d.lat===t.value.latitude&&d.lng===t.value.longitude&&d.location===t.value.location)t.continue();else{var a,n,i,s=new google.maps.Marker({position:{lat:t.value.latitude,lng:t.value.longitude},icon:{url:"./img/m.png",size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(25,25)},id:t.value.activityId,value:JSON.stringify(t.value)});if(calculateDistanceBetweenTwoPoints(u,{latitude:t.value.latitude,longitude:t.value.longitude})<.5){s.setMap(p);var o="<span>"+t.value.activityId+"</span>";google.maps.event.addListener(s,"click",(a=s,n=o,i=l,function(){r&&r.close(),i.setContent(n),i.open(p,a),r=i})),c.push(t.value),m.extend(s.getPosition())}else console.log(calculateDistanceBetweenTwoPoints({latitude:u.latitude,longitude:u.longitude},{latitude:t.value.latitude,longitude:t.value.longitude})),console.log(t.value);d={lat:t.value.latitude,lng:t.value.longitude,location:t.value.location},t.continue()}else t.continue()},a.oncomplete=function(){return p.fitBounds(m),e(c)}})}function profileView(){history.pushState(["profileView"],null,null),document.getElementById("start-load").classList.add("hidden"),document.querySelector(".mdc-bottom-navigation").classList.add("hidden");var t=firebase.auth().currentUser.metadata.lastSignInTime,a=firebase.auth().currentUser;getHeader("app-header","<a class='material-icons mdc-top-app-bar__navigation-icon'>arrow_back</a>","").setScrollTarget(document.getElementById("main-content"));var e='<div class="mdc-card demo-card mdc-top-app-bar--dense-fixed-adjust" id=\'profile-card\'>\n  <div class="mdc-card__primary-action demo-card__primary-action" tabindex="0">\n  \n  <div class="mdc-card__media mdc-card__media--16-9 demo-card__media"\n  style="background-image: url('+(firebase.auth().currentUser.photoURL||"./img/empty-user-big.jpg")+');">\n  <button id="edit-profile"\n  class="mdc-icon-button mdc-theme--primary-bg mdc-theme--on-primary"\n  aria-label="Add to favorites"\n  aria-hidden="true"\n  aria-pressed="false">\n  <i class="material-icons mdc-icon-button__icon mdc-icon-button__icon--on">check</i>\n  <i class="material-icons mdc-icon-button__icon">edit</i>\n</button>\n</div>\n<div id=\'base-details\'></div>\n<div id=\'user-details\'></div>  \n<div class="mdc-card__actions">\n<div class="mdc-card__action-buttons">\n    <span class="mdc-typography--headline6 last-logged-in-time">'+t+"</span>\n</div>\n</div>\n";document.getElementById("app-current-panel").innerHTML=e,setDetails();var n=new mdc.iconButton.MDCIconButtonToggle(document.getElementById("edit-profile")),i=void 0,s=void 0,o=a.displayName,l=a.email;n.listen("MDCIconButtonToggle:change",function(e){if(e.detail.isOn)return document.getElementById("base-details").innerHTML="",document.querySelector(".mdc-card .mdc-card__actions").classList.add("hidden"),document.querySelector("#user-details").innerHTML=createEditProfile(o,l),nameInit=new mdc.textField.MDCTextField(document.getElementById("name")),void(emailInit=new mdc.textField.MDCTextField(document.getElementById("email")));document.querySelector(".mdc-card .mdc-card__actions").classList.remove("hidden"),i=nameInit.value,s=emailInit.value,progressBar.foundation_.open(),i!==o&&isEmailValid(s,l)?a.updateProfile({displayName:i}).then(function(){timeDiff(t)<=2?updateEmail(a,s):newSignIn(s)}):i===o||isEmailValid(s,l)?i===o&&isEmailValid(s,l)?timeDiff(t)<=2?updateEmail(a,s):newSignIn(s):setDetails():a.updateProfile({displayName:i}).then(setDetails)}),console.log(n)}function setDetails(){progressBar.foundation_.close(),document.getElementById("base-details").innerHTML=createBaseDetails(),document.getElementById("user-details").innerHTML=createUserDetails(),createViewProfile()}function createBaseDetails(){return'   <div class="basic-info seperator">\n\n  <h1 class="mdc-typography--headline5 mb-0 mt-0" id=\'view-name\'>\n      '+(firebase.auth().currentUser.displayName||"-")+'</h1>\n  <h1 class="mdc-typography--headline6 mb-0 mt-0"><i\n          class="material-icons meta-icon mdc-theme--text-primary-on-dark">email</i><span id=\'view-email\'>\n          '+firebase.auth().currentUser.email+'\n      </span>\n\n  </h1>\n  <h1 class="mdc-typography--headline6 mt-0"> <i class="material-icons meta-icon mdc-theme--text-primary-on-dark">phone</i><span\n          class="mdc-typography--headline6">+91</span> 9999288921\n  </h1>\n</div>'}function createUserDetails(){return'\n  <div class="mdc-tab-bar" role="tablist">\n  <div class="mdc-tab-scroller">\n      <div class="mdc-tab-scroller__scroll-area">\n          <div class="mdc-tab-scroller__scroll-content" id=\'tab-scroller\'>\n\n          </div>\n      </div>\n  </div>\n</div>\n<div id=\'my-details\' class=\'pt-10\'></div>\n\n'}function createViewProfile(){getEmployeeDetails(IDBKeyRange.only(firebase.auth().currentUser.phoneNumber),"employees").then(function(n){var t="";n.forEach(function(e){t+=addTabs(e.office)}),document.getElementById("tab-scroller").innerHTML=t;var e=new mdc.tabBar.MDCTabBar(document.querySelector(".mdc-tab-bar"));setTimeout(function(){e.activateTab(0)},0),e.listen("MDCTabBar:activated",function(e){var t=n[e.detail.index],a=t.office,c=[t.attachment["First Supervisor"].value,t.attachment["Second Supervisor"].value];document.getElementById("my-details").innerHTML=fillUserDetails(t),Promise.all([getEmployeeDetails([a,"recipient"],"officeTemplate"),getEmployeeDetails([a,"leave-type"],"officeTemplate"),getEmployeeDetails([1,a],"teamOffice")]).then(function(e){var t=e[0],a=e[1],n=e[2];console.log(e),t.length&&(document.getElementById("reports").innerHTML=' <h1 class="mdc-typography--subtitle1 mt-0">\n                          Reports :\n                          '+t.map(function(e){return"<span>"+e.attachment.Name.value+'</span>  <span class="dot"></span>'}).join("")+"\n                          </h1>"),a.length&&(document.getElementById("leaves").innerHTML='<h1 class="mdc-typography--headline6 mb-0">\n                          Remaining Leaves\n                          '+a.map(function(e,t){return'<h1 class="mdc-typography--headline6 mt-0 '+(a.length-t==1?"":"mb-0")+'">'+e.attachment.Name.value+" : "+e.attachment["Annual Limit"].value+"</h1>"}).join("")+"\n                      </h1>");var i=db.transaction(["users"]),s=i.objectStore("users"),o="",l="";c.forEach(function(e){s.get(e).onsuccess=function(e){var t=e.target.result;t&&(l+=addUserChips(t))}}),n.length&&n.forEach(function(e){s.get(e.attachment["Employee Contact"].value).onsuccess=function(e){var t=e.target.result;t&&(o+=addUserChips(t))}}),i.oncomplete=function(){l&&(console.log(l),document.getElementById("supervisors").innerHTML='<h1 class="mdc-typography--headline6 mt-0 mb-0">Supervisors</h1>\n                  <div class="mdc-chip-set supervisor">\n                  '+l+"\n                  </div>\n                  "),o&&(console.log(o),document.getElementById("my-team").innerHTML='<h1 class="mdc-typography--headline6 mt-0 mb-0">Team</h1>\n                  <div class="mdc-chip-set">\n                  '+o+"\n                  </div>")}})})})}function createEditProfile(e,t){return' <div class="mdc-typography mdc-typography--body2 p-10" id=\'card-body-edit\'>\n  <div class="mdc-text-field mdc-text-field--with-leading-icon full-width" id=\'name\'>\n\n      <i class="material-icons mdc-text-field__icon">account_circle</i>\n      <input class="mdc-text-field__input" value="'+e+'">\n      <div class="mdc-line-ripple"></div>\n      <label class="mdc-floating-label '+(e?"mdc-floating-label--float-above":"")+'">Name</label>\n  </div>\n  <div class="mdc-text-field-helper-line">\n      <div id="username-helper-text" class="mdc-text-field-helper-text" aria-hidden="true">\n       This will be displayed on your public profile\n\n      </div>\n  </div>\n\n  '+emailField(t,"This Will Be Used For Sending Reports")+"\n</div>"}function emailField(e,t,a){return'<div class="mdc-text-field mdc-text-field--with-leading-icon full-width" id=\'email\'>\n  <i class="material-icons mdc-text-field__icon">email</i>\n  <input class="mdc-text-field__input" type=\'email\' value="'+e+'" autofocus='+(a?"true":"false")+'>\n  <div class="mdc-line-ripple"></div>\n  <label class="mdc-floating-label '+(e?"mdc-floating-label--float-above":"")+' ">Email</label>\n</div>\n<div class="mdc-text-field-helper-line">\n  <div id="username-helper-text" class="mdc-text-field-helper-text" aria-hidden="true">\n      '+t+"\n  </div>\n</div>"}function addTabs(e){return' <button class="mdc-tab" role="tab">\n        <span class="mdc-tab__content">\n            <span class="mdc-tab__text-label">'+e+'</span>\n        </span>\n        <span class="mdc-tab-indicator">\n            <span\n                class="mdc-tab-indicator__content mdc-tab-indicator__content--underline"></span>\n        </span>\n        <span class="mdc-tab__ripple"></span>\n    </button>'}function addUserChips(e){return'\n  <div class="mdc-chip">\n    '+(e.photoURL?'<img class="mdc-chip__icon mdc-chip__icon--leading" src='+e.photoURL+">":'<i class="material-icons mdc-chip__icon mdc-chip__icon--leading">supervisor_account</i>')+'\n    <div class="mdc-chip__text">'+(e.displayName||e.mobile)+"</div>\n</div>"}function fillUserDetails(t){var a={"First Supervisor":!0,"Second Supervisor":!0,"Employee Contact":!0,Name:!0};return'<div class="office-info seperator">\n'+Object.keys(t.attachment).map(function(e){return a[e]?"":t.attachment[e].value?'<h1 class="mdc-typography--subtitle1 mt-0">\n    '+e+" : "+t.attachment[e].value+"\n</h1>":""}).join("")+'\n\n<h1 class="mdc-typography--subtitle1 mt-0">\n    Joined : '+moment(firebase.auth().currentUser.metadata.creationTime).format("Do MMM YYYY")+"\n</h1>\n\n<div id='reports'>\n\n</div>\n</div>\n<div class=\"hierchy pt-10 seperator\">\n<div id='supervisors'>\n</div>\n\n<div id='my-team' style='padding-bottom:10px'>\n</div>\n</div>\n\n<div class=\"meta-hidden-details\">\n<div id='leaves'>\n\n</div>\n\n</div>\n\n</div>\n\n</div>\n"}function timeDiff(e){var t=moment().format("YYY-MM-DD HH:mm"),a=moment(e).format("YYY-MM-DD HH:mm");return moment(t).diff(moment(a),"minutes")}function isEmailValid(e,t){return!!e&&!(e===t)}function updateEmail(e,t){e.updateEmail(t).then(function(){emailUpdateSuccess(e)}).catch(console.log)}function emailUpdateSuccess(e){e.sendEmailVerification().then(function(){emailVerificationSuccess()}).catch(emailVerificationError)}function emailVerificationSuccess(){document.getElementById("dialog-container").innerHTML="",snacks("Verification link has been send to your email address"),setDetails()}function emailVerificationError(e){snacks(e.message);try{progressBar.foundation_.close()}catch(e){console.log(e)}}function newSignIn(t,a){var n=new Dialog("",createElement("div",{id:"refresh-login"})).create();n.open(),n.root_.querySelector(".mdc-dialog__content").style.padding="0px",console.log(n),n.listen("MDCDialog:opened",function(e){n.buttons_.forEach(function(e){e.classList.add("hidden")});try{ui||(ui=new firebaseui.auth.AuthUI(firebase.auth())),ui.start("#refresh-login",firebaseUiConfig(t,a)),setTimeout(function(){document.querySelector(".firebaseui-id-phone-number").disabled=!0,document.querySelector(".firebaseui-label").remove(),document.querySelector(".firebaseui-title").textContent="Verify your phone Number"},500)}catch(e){if(console.log(e),handleError({message:e.message+" from newSignIn function during email updation"}),a)return void mapView();snacks("Please try again later")}})}GetOffsetBounds.prototype.north=function(){return this.latLng.latitude+this.ratio},GetOffsetBounds.prototype.south=function(){return this.latLng.latitude-this.ratio},GetOffsetBounds.prototype.east=function(){return this.latLng.longitude+this.radioLon},GetOffsetBounds.prototype.west=function(){return this.latLng.longitude-this.radioLon};var apiHandler=new Worker("js/apiHandler.js");function handleError(e){var t=JSON.parse(localStorage.getItem("error"));t.hasOwnProperty(e.message)||(t[e.message]=!0,localStorage.setItem("error",JSON.stringify(t)),requestCreator("instant",JSON.stringify(e)))}function loader(e){var t=document.createElement("div");return t.className="loader "+e,t}function successDialog(e){console.log(e);var t=document.getElementById("success-animation"),a=document.getElementById("growthfile");t.classList.remove("hidden"),a.style.opacity="0.37",setTimeout(function(){t.classList.add("hidden"),a.style.opacity="1"},1500)}function snacks(e,t){"mapView"===history.state[0]&&(snackBar.labelText=e,snackBar.open(),snackBar.timeoutMs=4e3,snackBar.actionButtonText="okay")}function fetchCurrentTime(e){return Date.now()+e}function geolocationApi(i){return new Promise(function(t,a){var n=new XMLHttpRequest;n.open("POST","https://www.googleapis.com/geolocation/v1/geolocate?key="+appKey.getMapKey(),!0),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){if(4===n.readyState){if(400<=n.status)return a({message:n.response,body:JSON.parse(i)});var e=JSON.parse(n.response);if(!e)return a({message:"Response From geolocation Api "+e,body:JSON.parse(i)});t({latitude:e.location.lat,longitude:e.location.lng,accuracy:e.accuracy,provider:i})}},n.onerror=function(){a({message:n})},n.send(i)})}function manageLocation(){return new Promise(function(t,a){getLocation().then(function(e){updateLocationInRoot(e),t(e)}).catch(function(e){a(e)})})}function getLocation(){return new Promise(function(a,n){if("Android"!==native.getName())try{webkit.messageHandlers.locationService.postMessage("start"),window.addEventListener("iosLocation",function e(t){a(t.detail),window.removeEventListener("iosLocation",e,!0)},!0)}catch(e){a({latitude:28.549173600000003,longitude:77.25055569999999,accuracy:24})}else html5Geolocation().then(function(t){if(t.accuracy<=350)return a(t);handleGeoLocationApi().then(function(e){return t.accuracy<e.accuracy?a(t):a(e)}).catch(function(e){return a(t)})}).catch(function(t){handleGeoLocationApi().then(function(e){return a(e)}).catch(function(e){return n({message:"Both HTML and Geolocation failed to fetch location",body:{html5:t,geolocation:e},locationError:!0})})})})}function handleGeoLocationApi(){return new Promise(function(t,a){var e=void 0;try{e=getCellularInformation()}catch(e){a(e.message)}Object.keys(e).length||a("empty object from getCellularInformation"),geolocationApi(JSON.stringify(e)).then(function(e){return t(e)}).catch(function(e){a(e)})})}function logWifi(e){for(var n={message:"Wi-fi Change Log",body:{main:e}},t=function(e){var a;a=e,setTimeout(function(){if(3!=a){var t=void 0,e=void 0;1==a&&(e="first wifi at "+moment().format("hh:mm:ss")),2==a&&(e="second wifi at "+moment().format("hh:mm:ss"));try{t=getCellularInformation()}catch(e){t=e.message}n.body[e]=t}else handleError(n)},2e3*e)},a=1;a<=3;a++)t(a)}function iosLocationError(e){html5Geolocation().then(function(e){updateLocationInRoot(e)}).catch(function(e){reject(e)}),handleError(e)}function html5Geolocation(){return new Promise(function(t,a){navigator.geolocation.getCurrentPosition(function(e){return t({latitude:e.coords.latitude,longitude:e.coords.longitude,accuracy:e.coords.accuracy,provider:"HTML5"})},function(e){a({message:e.message})},{maximumAge:0,timeout:1e4,enableHighAccuracy:!1})})}function updateLocationInRoot(n){var i={latitude:"",longitude:"",accuracy:"",provider:"",lastLocationTime:""},e=db.transaction(["root"],"readwrite"),a=e.objectStore("root");a.get(firebase.auth().currentUser.uid).onsuccess=function(e){var t=e.target.result;t.location&&(i=t.location),t.location=n,t.location.lastLocationTime=Date.now(),a.put(t)},e.oncomplete=function(){if(i.latitude&&i.longitude&&n.latitude&&n.longitude){var e=calculateDistanceBetweenTwoPoints(i,n),t=new CustomEvent("suggestCheckIn",{detail:{newDay:isNewDay(!0),locationChanged:isLocationMoreThanThreshold(e)}});if(window.dispatchEvent(t),"Ios"===native.getName()){var a=new CustomEvent("iosLocation",{detail:n});window.dispatchEvent(a)}}},e.onerror=function(){handleError({message:e.error.message+" from updateLocationInRoot",body:e.error.name})}}function toRad(e){return e*Math.PI/180}function calculateDistanceBetweenTwoPoints(e,t){var a=toRad(t.latitude-e.latitude),n=toRad(t.longitude-e.longitude),i=toRad(t.latitude),s=toRad(e.latitude),o=Math.sin(a/2)*Math.sin(a/2)+Math.sin(n/2)*Math.sin(n/2)*Math.cos(i)*Math.cos(s);return 6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))}function isLocationMoreThanThreshold(e){return 1<=e}function isLocationStatusWorking(){return"Android"!==native.getName()||(AndroidInterface.isLocationPermissionGranted()?!{samsung:!0,OnePlus:!0}[JSON.parse(localStorage.getItem("deviceInfo")).deviceBrand]||(!!AndroidInterface.isWifiOn()||void new Dialog("TURN ON YOUR WIFI","Growthfile requires wi-fi access for improving your location accuracy.").create().open()):void new Dialog("LOCATION PERMISSION","Please Allow Growthfile location access.").create().open())}function requestCreator(e,i,t){var a=firebase.auth().currentUser;if(a){var s={type:e,body:"",meta:{user:{token:"",uid:a.uid,displayName:a.displayName,photoURL:a.photoURL,phoneNumber:a.phoneNumber},apiUrl:appKey.getBaseUrl()}};return a.getIdToken(!1).then(function(n){"instant"===e||"now"===e||"Null"===e||"backblaze"===e||"removeFromOffice"===e?(s.body=i,s.meta.user.token=n,apiHandler.postMessage(s)):getRootRecord().then(function(t){var e=t.location,a=!0;e&&(a=isLastLocationOlderThanThreshold(e.lastLocationTime,10)),s.meta.user.token=n,a?manageLocation().then(function(e){createRequestBody(i,s,t.serverTime,e)}).catch(locationErrorDialog):createRequestBody(i,s,t.serverTime,t.location)})}).catch(console.log),new Promise(function(t,a){apiHandler.onmessage=function(e){return console.log(e),e.data.success?t(e.data):a(e.data)},apiHandler.onerror=function(e){return console.log(e),a(e.data)}})}}function createRequestBody(e,t,a,n){e.timestamp=fetchCurrentTime(a),e.geopoint=n,t.body=e,apiHandler.postMessage(t)}function locationErrorDialog(t){var e=new Dialog("Location Error","There was a problem in detecting your location. Please try again later").create();e.open(),e.listen("MDCDialog:closed",function(e){resetScroll(),listView(),handleError(t)})}function isLastLocationOlderThanThreshold(e,t){if(!e)return!0;var a=moment(moment().valueOf());return t<moment.duration(a.diff(e)).asSeconds()}var receiverCaller={"update-app":updateApp,"removed-from-office":officeRemovalSuccess,"revoke-session":revokeSession,notification:successDialog};function messageReceiver(e){receiverCaller[e.data.type](e.data)}function emailVerify(e){if(!firebase.auth().currentUser.email||!firebase.auth().currentUser.emailVerified){if(firebase.auth().currentUser.email)return emailUpdateSuccess();var t=new Dialog(e.title,e.body).create();t.open(),t.listen("MDCDialog:closed",function(e){"accept"===e.detail.action&&profileView(!0)})}}function templateDialog(e,i,s){var t=createElement("div",{className:"notification-message",textContent:e.body}),a=createElement("ul",{className:"mdc-list",id:"payroll-notification-list"});a.setAttribute("role","radiogroup"),e.data.forEach(function(e,t){a.appendChild(radioList({labelText:e.template,index:t,value:e}))}),t.appendChild(a);var n=new Dialog(e.title,t).create();n.open();var o=new mdc.list.MDCList(a);o.singleSelection=!0,n.listen("MDCDialog:opened",function(e){o.layout(),o.listElements.map(function(e){return new mdc.ripple.MDCRipple.attachTo(e)})}),n.listen("MDCDialog:closed",function(e){if("accept"===e.detail.action&&isLocationStatusWorking()){var t=document.getElementById("list-radio-item-"+o.selectedIndex).value;if(t){var a=JSON.parse(t),n={schedule:"",attachment:""};i||(n.schedule=a.schedule,n.attachment=a.attachment),ga("send",{hitType:"event",eventCategory:"suggestion",eventAction:"click",eventLabel:a.template+" suggestion selected"}),s?selectorUI({store:"subscriptions"}):createTempRecord(a.office,a.template,n)}}})}function updateApp(){if("Android"!==native.getName())return webkit.messageHandlers.updateApp.postMessage("Update App");var e=new Dialog("New Update Avaialble","Please Install the Latest version from google play store , to Use Growthfile. Click Okay to Install Lastest Version from Google Play Store.").create();e.open(),e.scrimClickAction="",e.listen("MDCDialog:opened",function(){e.buttons_[0].setAttribute("disabled","true")}),e.listen("MDCDialog:closed",function(e){"accept"===e.detail.action&&AndroidInterface.openGooglePlayStore("com.growthfile.growthfileNew")})}function revokeSession(){firebase.auth().signOut().then(function(){}).catch(function(e){handleError({message:"Sign out error",body:e})})}function officeRemovalSuccess(e){var t=new Dialog("Reminder","You have been removed from "+e.msg.join(" & ")).create();t.open(),t.listen("MDCDialog:closed",function(){})}function onErrorMessage(e){var t={"line-number":e.lineno,file:e.filename,"col-number":e.colno};handleError({message:e.message+" from apiHandler.js at line-number "+e.lineno+" and columne-number "+e.colno,body:t})}function getInputText(e){return mdc.textField.MDCTextField.attachTo(document.querySelector(e))}function runRead(e){localStorage.getItem("dbexist")&&(e&&!e.read||requestCreator("Null",e).then(function(e){console.log(e)}).catch(console.log))}function removeChildNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function getRootRecord(){return new Promise(function(e,t){var a=void 0,n=db.transaction(["root"],"readwrite");n.objectStore("root").get(firebase.auth().currentUser.uid).onsuccess=function(e){var t=e.target.result;a=t},n.oncomplete=function(){e(a)},n.onerror=function(){t({message:n.error.message+" from getRootRecord"})}})}function getUserRecord(i,s){return new Promise(function(a,e){var t=s.objectStore("users"),n=void 0;n="string"==typeof i?i:i.phoneNumber,t.get(n).onsuccess=function(e){var t=e.target.result;return a(t||{displayName:"",mobile:n,photoURL:""})}})}function getSubscription(s,o){return new Promise(function(e){var t=db.transaction(["subscriptions"]),a=t.objectStore("subscriptions").index("officeTemplate"),n=IDBKeyRange.only([s,o]),i=void 0;a.get(n).onsuccess=function(e){e.target.result&&"CANCELLED"!==e.target.result.status&&(i=e.target.result)},t.oncomplete=function(){return e(i)}})}function showUserDetails(){var e=firebase.auth().currentUser;return e.email&&e.emailVerified}function userDetails(a,t){document.getElementById("start-load").classList.add("hidden");var e=document.getElementById("app-current-panel");e.classList.add("user-detail-bckg"),e.innerHTML=userDom();var n=new mdc.linearProgress.MDCLinearProgress(document.getElementById("card-progress"));n.close(),send=new mdc.ripple.MDCRipple(document.getElementById("send"));var i="",s="",o="";t.email?t.emailVerified||(s="Please Verify Your Email Address",send.root_.querySelector("span").textContent="Verify"):(s="Please Add Your Email Address",o="Enter Your Email Address");var l="";a.forEach(function(e,t){i+=e.attachment.Name.value+" "+(t==a.length-1?"":",")}),l+=i,document.getElementById("email-container").innerHTML="<h2 class='mdc-typography--headline5'>"+s+"</h2>\n    <p>You Have Been Added as a recipient in "+l+"</p>\n    "+emailField(t.email,""+o,!0)+'\n    <button class="mdc-button hidden" id="change-email" style="\n    float: right;\n">\n    <span class="mdc-button__label">Change Email</span>\n  </button>\n    ',change=new mdc.ripple.MDCRipple(document.getElementById("change-email")),next=new mdc.ripple.MDCRipple(document.getElementById("next")),(emailInit=new mdc.textField.MDCTextField(document.getElementById("email"))).input_.setAttribute("required","true"),emailInit.root_.classList.add("mdc-text-field--focused"),console.log(emailInit),change.root_.onclick=function(){emailInit.foundation_.setDisabled(!1),change.root_.classList.add("hidden"),next.root_.classList.add("hidden"),send.root_.classList.remove("hidden")},next.root_.onclick=function(){setTimeout(function(){if(firebase.auth().currentUser.reload(),firebase.auth().currentUser.emailVerified)return mapView();change.root_.classList.remove("hidden"),snacks("You have not verified Your Email Address. Try Again")},2e3)},send.root_.onclick=function(){var e=emailInit.value;if(!e)return emailInit.root_.classList.add("mdc-text-field--focused"),void emailInit.foundation_.setHelperTextContent("Please Check Your Email");emailInit.foundation_.setHelperTextContent(""),send.root_.classList.add("hidden"),n.open(),timeDiff(t.metadata.lastSignInTime)<=5?emailFlow(t,e).then(function(){n.close(),snacks("Verification Link has Been Send To you Email Address"),emailInit.foundation_.setDisabled(!0),change.root_.classList.remove("hidden"),next.root_.classList.remove("hidden")}).catch(function(e){if(n.close(),"auth/too-many-requests"===e.code)return mapView(),void snacks("You Can Also Update Your Email Address From Your Profile");send.root_.classList.remove("hidden"),snacks(e.message)}):newSignIn(e,!0)}}function emailFlow(a,n){return new Promise(function(e,t){a.updateEmail(n).then(function(){a.sendEmailVerification().then(function(){return e(!0)}).catch(function(e){return t(e)})}).catch(function(e){return t(e)})})}function userDom(){return'<div class="mdc-card" id=\'user-fill\'>\n    <div role="progressbar" class="mdc-linear-progress mdc-linear-progress--indeterminate" id=\'card-progress\'>\n  <div class="mdc-linear-progress__buffering-dots"></div>\n  <div class="mdc-linear-progress__buffer"></div>\n  <div class="mdc-linear-progress__bar mdc-linear-progress__primary-bar">\n    <span class="mdc-linear-progress__bar-inner"></span>\n  </div>\n  <div class="mdc-linear-progress__bar mdc-linear-progress__secondary-bar">\n    <span class="mdc-linear-progress__bar-inner"></span>\n  </div>\n</div>\n    <div class="mdc-card__primary-action user-card">\n    \n    <div id=\'email-container\'>\n    \n    </div>\n  \n    <div class=\'button\'>\n    <button class="mt-10  hidden mdc-button mdc-theme--primary-bg mdc-theme--text-primary-on-light" id=\'next\' style=\'width:100%\'>\n    <span class="mdc-button__label">Next</span>\n  </button>\n    <button class="mt-20 mdc-button mdc-theme--primary-bg mdc-theme--text-primary-on-light" id=\'send\' style=\'width:100%\'>\n    <span class="mdc-button__label">Update</span>\n  </button>\n \n    </div>\n\n</div>\n    '}